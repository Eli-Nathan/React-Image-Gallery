<!DOCTYPE html>
<html lang="en-GB" class="no-js">

<head>
	<meta charset="utf-8">
  

	<title>React image gallery | Social </title>

	<meta name="description" content="React image gallery with lightbox">
	<meta name="viewport" content="width=device-width">
	<link rel="shortcut icon" href="/React-Image-Gallery/favicon.ico?v=3">
	<link rel="canonical" href="https://eli-nathan.github.io/React-Image-Gallery/">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css">
	<link rel="stylesheet" href="/React-Image-Gallery/assets/css/styles.css">
	<link rel="stylesheet" href="/React-Image-Gallery/assets/css/darcula-theme.css">
</head>

<body>

	<div class="heading py-5">
  <div class="container">
    <div class="row">
      <div class="col-sm-12 text-center">
        <img src="/React-Image-Gallery/assets/images/gallery.svg" width="100" alt="Image gallery" />
        <h1>Image gallery</h1>
        <a href="https://github.com/eli-nathan/React-Image-Gallery" target="_blank" class="badge badge-dark">
          <i class="fa fa-github" aria-hidden="true"></i>
          &nbsp; View on github
        </a>
        <a href="https://elisweb.co.uk" class="badge badge-info">
          <i class="fa fa-rocket" aria-hidden="true"></i>
          &nbsp; Eli's Web
        </a>
      </div>
    </div>
  </div>
</div>

<div class="intro">
  <div class="container">
    <div class="row">
      <div class="col-sm-12">
        <p>A completely accessible image gallery allowing you to tab through the lightbox arrows with focus contained within it rather than the whole document while it is open.</p>
      </div>
    </div>
  </div>
</div>

<div class="gallery mb-5">
  <div class="container">
    <div id="image-gallery"></div>
  </div>
</div>

<div class="intro mt-5">
  <div class="container">
    <div class="row">
      <div class="col-sm-12">
        <p>By simply passing a props to the gallery we can change the layout. For example, passing <code class="language-js p-sm-2">style="grid"</code>, we can get a basic grid layout.</p>
      </div>
    </div>
  </div>
</div>

<div class="gallery2">
  <div class="container">
    <div id="image-gallery2"></div>
  </div>
</div>

<div class="code mt-5">
  <div class="container">
    <div class="row">
      <div class="col-md-12 code-section">
        <div class="container code-snippets">
          <h2 class="text-center my-3">View code</h2>
          <hr>
          <figure>
            <figcaption>Markup</figcaption>
            <pre class="language-markup"><code class="language-markup">&#x3C;div class=&#x22;gallery&#x22;&#x3E;
  &#x3C;div class=&#x22;container&#x22;&#x3E;
    &#x3C;div id=&#x22;image-gallery&#x22;&#x3E;&#x3C;/div&#x3E;
  &#x3C;/div&#x3E;
&#x3C;/div&#x3E;</code></pre>
          </figure>
          <figure>
            <figcaption>Main JS file</figcaption>
              <pre class="language-js"><code class="language-js">import React from 'react'
import ReactDOM from 'react-dom'
import ImageGallery from './components/ImageGallery'

let imageGallery = document.getElementById("image-gallery")
const images = [
  {
    path: "https://images.unsplash.com/photo-1550851985-f79ef89f3578?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1510&q=80",
    alt: "BMW in the sun",
    caption: "BMW 5-series in a lumber yard"
  },
  {
    path: "https://images.unsplash.com/photo-1551115190-75708aec3314?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1510&h=1000&fit=crop&ixid=eyJhcHBfaWQiOjF9",
    alt: "Departure lounge",
    caption: "Departure lounge"
  },
  {
    path: "https://images.unsplash.com/photo-1551708769-d1525c52cccc?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1510&h=1000&fit=crop&ixid=eyJhcHBfaWQiOjF9",
    alt: "Stack of vinyls",
    caption: "Stack of vinyls with Queen record at the top"
  },
  {
    path: "https://images.unsplash.com/photo-1550945135-3f8d8b938111?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1510&h=1000&fit=crop&ixid=eyJhcHBfaWQiOjF9",
    alt: "Bus",
    caption: "London Buss"
  },
  {
    path: "https://images.unsplash.com/photo-1549780450-4e6066b727df?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1510&h=1000&fit=crop&ixid=eyJhcHBfaWQiOjF9",
    alt: "Sheep in field",
    caption: "Sheep in field"
  },
  {
    path: "https://images.unsplash.com/photo-1551010457-3cdd802dfa3c?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1510&h=1000&fit=crop&ixid=eyJhcHBfaWQiOjF9",
    alt: "Alleyway",
    caption: "Alleyway in Eastern City"
  },
  {
    path: "https://images.unsplash.com/photo-1550837725-bdcb030d1e54?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1510&h=1000&fit=crop&ixid=eyJhcHBfaWQiOjF9",
    alt: "Newyork",
    caption: "Newyork city-scape"
  },
  {
    path: "https://images.unsplash.com/photo-1551525212-a1dc18871d4a?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1510&h=1000&fit=crop&ixid=eyJhcHBfaWQiOjF9",
    alt: "Sunny Hotel building",
    caption: "Hotel reception with large open windows"
  },
  {
    path: "https://images.unsplash.com/photo-1551660209-9ceaab86a803?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1510&h=1000&fit=crop&ixid=eyJhcHBfaWQiOjF9",
    alt: "Snowboarder image gallery",
    caption: "Lone snowboarder on a slope"
  },
  {
    path: "https://images.unsplash.com/photo-1551376347-075b0121a65b?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1510&h=1000&fit=crop&ixid=eyJhcHBfaWQiOjF9",
    alt: "Pink hills image gallery",
    caption: "Pink haze over hills"
  }
]

ReactDOM.render( &#x3C;ImageGallery images={images} /&#x3E;, imageGallery )</code></pre>
</figure>

<figure>
  <figcaption>Component</figcaption>
          <pre class="language-js"><code class="language-js">import React, {Component} from &#x27;react&#x27;;

class ImageGallery extends Component {
  constructor(props) {
    super(props);

    this.state = {
      showLightbox: false
    }
  }

  // Handle Keydown function with event parameter
  handleKeyDown = (event) =&#x3E; {
    // If the lightbox is showing
    if(this.state.showLightbox) {
      // Define buttons and keycodes
      let firstArrow = document.querySelector(&#x22;.lightbox .arrows .arrows__left&#x22;)
      let lastArrow = document.querySelector(&#x22;.lightbox .arrows .arrows__right&#x22;)
      let closeIcon = document.querySelector(&#x22;.lightbox .close-button&#x22;)
      let TAB_KEY = 9
      let ESCAPE_KEY = 27
      let LEFT_ARROW = 37
      let RIGHT_ARROW = 39
      // If esc is clicked, call the close function
      if(event.keyCode == ESCAPE_KEY) this.onClose()
      // If left arrow is clicked, call the changeImage function
      if(event.keyCode == LEFT_ARROW) this.changeImage(-1)
      // If left arrow is clicked, call the changeImage function
      if(event.keyCode == RIGHT_ARROW) this.changeImage(1)
      // If tab is clicked, keep focus on the arrows
      if(event.keyCode == TAB_KEY &#x26;&#x26; !event.shiftKey) {
        console.log(document.activeElement);
        if(document.activeElement == firstArrow) {
          event.preventDefault()
          lastArrow.focus()
        }
        else if(document.activeElement == lastArrow) {
          event.preventDefault()
          closeIcon.focus()
        }
        else {
          event.preventDefault()
          firstArrow.focus()
        }
      }
      if(event.keyCode == TAB_KEY &#x26;&#x26; event.shiftKey) {
        if(document.activeElement == firstArrow) {
          event.preventDefault()
          closeIcon.focus()
        }
        else if(document.activeElement == lastArrow) {
          event.preventDefault()
          firstArrow.focus()
        }
        else {
          event.preventDefault()
          lastArrow.focus()
        }
      }
    }
  }

  // onClick function
  onClick = (e, key) =&#x3E; {
    // Prevent default action (href=&#x22;#&#x22;)
    e.preventDefault()
    /*
      Set state:
        activeImage = the image&#x27;s index in the array of images
        showLightbox = true
      Callback:
        - Get left arrow button and focus on it
        - Add no scroll class to body
        - Call scrollToThumb function
    */
    this.setState({
      activeImage: key,
      showLightbox: true
    }, () =&#x3E; {
      document.querySelector(&#x22;.lightbox .arrows .arrows__left&#x22;).focus()
      document.body.classList.add(&#x22;no-scroll&#x22;)
      this.scrollToThumb()
    })
  }

  // onClose function
  onClose = () =&#x3E; {
    /*
      Set state:
        showLightbox = false
      Callback:
        - Remove no scroll class from body
    */
    this.setState({
      showLightbox: false
    }, () =&#x3E; document.body.classList.remove(&#x22;no-scroll&#x22;))
  }

  // changeImage function
  changeImage = (calc) =&#x3E; {
    // If first image is active and parameter is -1
    if (this.state.activeImage == 0 &#x26;&#x26; calc == -1) {
      // set parameter to the length of the array to go right to the last image
      calc = this.props.images.length - 1
    }
    // If last image is active and parameter is 1
    else if (this.state.activeImage == (this.props.images.length -1) &#x26;&#x26; calc == 1) {
      // set parameter to the (negative)length of the array to go right to the first image
      calc = -(this.props.images.length -1)
    }
    /*
      Set state:
        activeImage = selected image + or - calc amount
      Callback:
        - Call scrollToThumb function
    */
    this.setState(state =&#x3E; ({
      activeImage: state.activeImage + calc
    }), () =&#x3E; this.scrollToThumb())
  }

  // scrollToThumb function
  scrollToThumb = () =&#x3E; {
    /* Define variables for:
      - Lightbox div
      - Thumbs div
      - First thumbnail div
      - Active thumbnail div
      - The offsetTop of the clicked thumbnail on mobile devices
      - X-axis offset of first div
    */
    let lightbox = document.querySelector(&#x22;.lightbox&#x22;)
    let thumbs = document.querySelector(&#x22;.thumbs&#x22;)
    let firstThumb = document.querySelectorAll(&#x22;.thumb&#x22;)[0]
    let activeThumb = document.querySelector(&#x22;.thumb--active&#x22;)
    let activeTop = document.querySelector(&#x22;.thumb--active&#x22;).offsetTop
    let firstOffset = firstThumb.offsetLeft
    // Set the scroll position to show the selected thumb with some space to the left (200px)
    thumbs.scrollLeft = activeThumb.offsetLeft - firstOffset - 200
    // Set the scroll top to scroll to pressed thumbnail image for mobile devices
    lightbox.scrollTop = activeTop - 30;

  }

  /*
    galleryImage function
    Parameters:
      - cols = Chassis columns defined based on the selected style and which image it is
      - path = image.path
      - alt = image.alt
      - i = image number
  */
  galleryImage = (cols, path, alt, i) =&#x3E; {
    return (
      &#x3C;div
        className={cols}
        key={i+100}
      &#x3E;
        &#x3C;a
          onClick={e =&#x3E; this.onClick(e, i)}
          href=&#x22;#&#x22;
        &#x3E;
          &#x3C;div className=&#x22;gallery-image&#x22;&#x3E;
            &#x3C;img
              src={path}
              alt={alt}
              className=&#x22;ch-img--responsive ch-hand gallery-image__image&#x22;
            /&#x3E;
            &#x3C;div className=&#x22;gallery-image__overlay&#x22;&#x3E;
            &#x3C;/div&#x3E;
          &#x3C;/div&#x3E;
        &#x3C;/a&#x3E;
      &#x3C;/div&#x3E;
    )
  }

  // renderImages function
  renderImages = () =&#x3E; {
    let cols
    const maxImages = this.props.style == &#x22;4/3&#x22; ? 7 : 8
    // Cleaned images array is the first 7 images
    const cleanedImages = this.props.images.slice(0, maxImages)
    // Amount is the length of that array (I&#x27;ve done this incase we change 7 to a different number)
    const amount = cleanedImages.length
    // Map the images
    const images = cleanedImages.map((image, i) =&#x3E; {
      // If the defined style is four by 3...
      if(this.props.style == &#x22;4/3&#x22;) {
        // Layout for the second and third-last image
        if((amount - 1) == i + 1 || (amount - 2) == i + 1) cols = &#x22;col-6 col-sm-4 mb-4 mb-sm-4&#x22;
        // Layout for the last image
        else if(amount == i + 1) cols = &#x22;col-12 col-sm-4 mb-4 mb-sm-4&#x22;
        // Otherwise, layout is just a simple grid
        else cols = &#x22;col-6 col-sm-3 mb-4 mb-sm-4&#x22;
      }
      else if (!this.props.style || this.props.style == &#x22;grid&#x22;) cols = &#x22;col-6 col-sm-3 mb-4 mb-sm-4&#x22;
      // Return an image from the galleryImage function based on the parameters from above
      return (
        this.galleryImage(cols, image.path, image.alt, i)
      )
    })
    // Return images
    return images
  }

  renderLightbox = () =&#x3E; {
    // Listen for keydown event and call function
    document.addEventListener(&#x22;keydown&#x22;, this.handleKeyDown)
    const lightbox = (
      &#x3C;div className={&#x60;lightbox ${this.state.showLightbox ? &#x22;lightbox--visible&#x22; : &#x22;&#x22;}&#x60;}&#x3E;
        {this.renderImage()}
        {this.renderCounter()}
        &#x3C;div className={&#x60;thumbs mx-auto ${this.props.images.length &#x3C; 11 ? &#x22;flex-xxl&#x22; : &#x22;&#x22;}&#x60;}&#x3E;
          {this.renderThumbnails()}
        &#x3C;/div&#x3E;
        &#x3C;button
          className=&#x22;float-right close-button&#x22;
          onClick={e =&#x3E; this.onClose(e)}
        /&#x3E;
      &#x3C;/div&#x3E;
    )
    return lightbox
  }

  renderImage = () =&#x3E; {
    return (
      &#x3C;div className=&#x22;d-none d-md-flex text-center imageContainer&#x22;&#x3E;
        &#x3C;figure&#x3E;
          &#x3C;div className=&#x22;overlays mx-auto&#x22;&#x3E;
            &#x3C;div
              className=&#x22;overlay&#x22;
              onClick={e =&#x3E; this.changeImage(-1)}
            /&#x3E;
            &#x3C;div
              className=&#x22;overlay&#x22;
              onClick={e =&#x3E; this.changeImage(1)}
            /&#x3E;
          &#x3C;/div&#x3E;
          &#x3C;img
            src={this.props.images[this.state.activeImage].path}
            alt={this.props.images[this.state.activeImage].alt}
            className=&#x22;featuredImage mt-md-4 mx-md-auto text-center&#x22;
          /&#x3E;
          &#x3C;figcaption className=&#x22;caption mt-1 mx-auto mb-4 text-center&#x22;&#x3E;{this.props.images[this.state.activeImage].caption}&#x3C;/figcaption&#x3E;
        &#x3C;/figure&#x3E;
        {this.renderNavigation()}
      &#x3C;/div&#x3E;
    )
  }

  renderCounter = () =&#x3E; {
    return (
      &#x3C;p className=&#x22;counter d-none d-md-block text-center&#x22;&#x3E;
        {&#x60;Image ${this.state.activeImage + 1}/${this.props.images.length}&#x60;}
      &#x3C;/p&#x3E;
    )
  }

  renderNavigation = () =&#x3E; {
    return (
      &#x3C;div className=&#x22;arrows d-none d-md-block&#x22;&#x3E;
        &#x3C;button
          className=&#x22;arrow arrows__left position-absolute&#x22;
          onClick={e =&#x3E; this.changeImage(-1)}
        /&#x3E;
        &#x3C;button
          className=&#x22;arrow arrows__right position-absolute&#x22;
          onClick={e =&#x3E; this.changeImage(1)}
        /&#x3E;
      &#x3C;/div&#x3E;
    )
  }

  renderThumbnails = () =&#x3E; {
    const thumbs = this.props.images.map((image, i) =&#x3E; {
      return (
        &#x3C;div
          key={i}
          className={&#x60;thumb d-md-inline-block mb-3 mb-md-0 mt-4 mt-md-2 mr-md-2${i === this.state.activeImage ? &#x22; thumb--active border-3 border-white&#x22; : &#x22;&#x22;}&#x60;}
          onClick={e =&#x3E; this.onClick(e, i)}
        &#x3E;
          &#x3C;figure&#x3E;
            &#x3C;img
              src={this.props.images[i].path}
              alt={this.props.images[i].alt}
              className=&#x22;img-fluid mx-auto mt-4 mt-md-0&#x22;
            /&#x3E;
            &#x3C;figcaption className=&#x22;caption mt-1 mx-auto mb-4 mb-md-5 d-md-none&#x22;&#x3E;{this.props.images[i].caption}&#x3C;/figcaption&#x3E;
          &#x3C;/figure&#x3E;
        &#x3C;/div&#x3E;
      )
    })
    return thumbs
  }


  render() {
    return (
      &#x3C;div className=&#x22;row&#x22;&#x3E;
        {this.renderImages()}
        {this.state.showLightbox ? this.renderLightbox() : null}
      &#x3C;/div&#x3E;
    );
  }

}

export default ImageGallery
</code></pre>
</figure>

<figure>
  <figcaption>Styles</figcaption>

<pre class="language-css"><code class="language-css">// Bootstrap
@import &#x27;bootstrap/bootstrap.scss&#x27;;

@import url(&#x27;https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700&#x27;);

body {
  font-family: &#x27;Ubuntu Mono&#x27;, monospace, &#x27;Roboto&#x27;, -apple-system, BlinkMacSystemFont, &#x22;Segoe UI&#x22;, Roboto Helvetica, Arial, sans-serif, &#x22;Apple Color Emoji&#x22;, &#x22;Segoe UI Emoji&#x22;, &#x22;Segoe UI Symbol&#x22;;
  position: relative;

  &#x26;.no-scroll {
    overflow:hidden;
  }
}

.gallery-image {
  position: relative;
  width: 100%;

  &#x26;__image {
    width: 100%;
    transition: .5s;
    overflow: hidden;

    &#x26;:hover {
      transform: scale(1.2);
    }
  }

  &#x26;__overlay {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    height: 100%;
    width: 100%;
    opacity: 0;
    transition: .3s ease;
    background-color: rgba(#fff, .2);
    display: flex;
    justify-content: center;
    align-items: center;
  }

  &#x26;:hover {
    .gallery-image__overlay {
      opacity: 1;
    }
  }

  .icon {
    color: white;
    font-size: 100px;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    -ms-transform: translate(-50%, -50%);
    text-align: center;
  }
}

.lightbox {
  display: none;
  z-index: 1000;
  overflow: scroll;

  &#x26;--visible {
    display: block;
    width: 100vw;
    height: 100vh;
    position: fixed;
    top: 0;
    left: 0;
    background-color: rgba(#000, .9);
    color: #fff;

    .imageContainer {
      align-items: center;
      justify-content: center;

      figure {
        width: 100vw;
        position: relative;
        margin: 0;

        .overlays {
          position: absolute;

          @include media-breakpoint-up(md) {
            width: 48%;
            margin: 0 auto;
            left: 26%;
            height: 90%;
          }

          @include media-breakpoint-up(lg) {
            height: 92%;
          }

          @include media-breakpoint-up(xl) {
            margin-top: $spacer*3;
            width: 50%;
            left: 25%;
            height: 83%;
          }

          .overlay {
            width: 50%;
            height: 100%;
            float: left;
          }
        }

        img {
          width: 95%;

          @include media-breakpoint-up(md) {
            width: 48%;
          }

          @media (min-width: 1800px) {
            margin-top: $spacer*16;
            width: 50%;
          }
        }

        .caption {
          width: 95%;

          @include media-breakpoint-up(md) {
            width: 50%;
          }
        }
      }
    }

    .caption {
      width: 95%;
      margin-bottom: 24px;

      @include media-breakpoint-up(md) {
        width: 75%;
        text-align: center;
      }

      @include media-breakpoint-up(lg) {
        width: 50%;
      }
    }

    .thumbs {
      width: 95%;
      display: block;

      @include media-breakpoint-up(md) {
        width: 75%;
        overflow: hidden;
        scroll-behavior: smooth;
        overflow-x:scroll;
        white-space:nowrap;
        -webkit-overflow-scrolling: touch;
      }

      @include media-breakpoint-up(lg) {
        width: 50%;
      }

      &#x26;.flex-xxl {
        @include media-breakpoint-up(xxl) {
          display: flex;
          justify-content: center;
        }
      }

      .thumb {
        width: 100%;
        margin-top: 24px;
        cursor: pointer;

        @include media-breakpoint-up(md) {
          width: 100px;
          display:inline-block;
          margin-right: 14px;

          &#x26;:last-of-type {
            margin-right: 0;
          }
        }

        &#x26;--active {
          @include media-breakpoint-up(md) {
            border: 2px solid #fff;
          }
        }

        figure {
          margin: 0;
        }

        img {
          width: 100%;
        }

        .caption {
          width: 100%;
          margin-bottom: 24px;

          @include media-breakpoint-up(md) {
            margin-bottom: 48px;
            width: 75%;
          }

          @include media-breakpoint-up(lg) {
            width: 50%;
          }
        }
      }
    }

    .close-button {
      position: fixed;
      width: 48px;
      height: 48px;
      right: 0;
      top: 0;
      margin: 18px 21px;
      background: transparent url(&#x22;/assets/images/close.svg&#x22;) no-repeat center center / contain;
      border: none;
      cursor: pointer;

      @include media-breakpoint-up(md) {
        position: absolute;
        margin: 1% 1%;
      }
    }

    .arrows {
      .arrow {
        width: 50px;
        height: 50px;
        border: none;
        cursor: pointer;
      }

      &#x26;__left {
        background: url(&#x22;/assets/images/left-arrow.svg&#x22;) no-repeat center center / contain;

        @include media-breakpoint-up(md) {
          left: 19%;
        }

        @include media-breakpoint-up(lg) {
          left: 20%;
        }
      }

      &#x26;__right {
        background: url(&#x22;/assets/images/right-arrow.svg&#x22;) no-repeat center center / contain;

        @include media-breakpoint-up(md) {
          right: 19%;
        }

        @include media-breakpoint-up(lg) {
          right: 20%;
        }
      }
    }
  }
}
</code>
</pre>
        </div>
      </div>
    </div>
  </div>
</div>


	<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/prism.min.js"></script>
<script src="/React-Image-Gallery/assets/scripts/scripts.js"></script>


</body>

</html>
